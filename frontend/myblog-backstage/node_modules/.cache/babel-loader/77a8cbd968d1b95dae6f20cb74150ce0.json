{"remainingRequest":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\babel-loader\\lib\\index.js!D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\src\\permission.js","dependencies":[{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\src\\permission.js","mtime":1616327517480},{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqDQogKiDlhajnq5not6/nlLHphY3nva4NCiAqDQogKiBtZXRh5Y+C5pWw6K+05piODQogKiBrZWVwQWxpdmXmmK/lkKbnvJPlhrLpobXpnaINCiAqIGlzVGFi5piv5ZCm5Yqg5YWl5YiwdGFn5a+86IiqDQogKiBpc0F1dGjmmK/lkKbpnIDopoHmjojmnYMNCiAqLwppbXBvcnQgcm91dGVyIGZyb20gJy4vcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwppbXBvcnQgeyB2YWxpZGF0ZW51bGwgfSBmcm9tICdAL3V0aWwvdmFsaWRhdGUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbC9hdXRoJzsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIG1ldGEgPSB0by5tZXRhIHx8IHt9OwoKICBpZiAoZ2V0VG9rZW4oKSkgewogICAgLy/lpoLmnpznmbvlvZXmiJDlip/orr/pl67nmbvlvZXpobXot7PovazliLDkuLvpobUKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAnLycKICAgICAgfSk7CiAgICB9IC8vIOWIpOaWreW9k+WJjeeUqOaIt+aYr+WQpuW3suaLieWPluWujOS/oeaBryzlpoLmnpzmsqHmnInmm7TmlrDkv6Hmga/liJnmi4nlj5bvvIzpppbmrKHliqDovb3lj6/og73kvJrmhaLkupsKICAgIGVsc2UgaWYgKHZhbGlkYXRlbnVsbChzdG9yZS5nZXR0ZXJzLnVzZXJJbmZvKSkgewogICAgICAgIGNvbnNvbGUubG9nKCLmi4nlj5bkv6Hmga8iKTsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgiR2V0VXNlckluZm8iKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG5leHQodG8pOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coIuaLieWPluS/oeaBryIsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KCk7CiAgICAgIH0KICB9IGVsc2UgewogICAgaWYgKG1ldGEuaXNBdXRoID09PSBmYWxzZSkgewogICAgICBuZXh0KCk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCcvbG9naW4nKTsKICAgIH0KICB9Cn0pOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICB2YXIgdGl0bGUgPSBzdG9yZS5nZXR0ZXJzLnRhZy5sYWJlbDsKICBkb2N1bWVudC50aXRsZSA9IHRpdGxlOwp9KTs="},{"version":3,"sources":["D:/data/GoWorkSpace/src/github.com.qq4215279/MyBlog/frontend/myblog-backstage/src/permission.js"],"names":["router","store","validatenull","getToken","beforeEach","to","from","next","meta","path","getters","userInfo","console","log","dispatch","then","error","isAuth","afterEach","title","tag","label","document"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAAQC,YAAR,QAA2B,iBAA3B;AACA,SAAQC,QAAR,QAAuB,aAAvB;AAEAH,MAAM,CAACI,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,IAAI,GAAGH,EAAE,CAACG,IAAH,IAAW,EAAxB;;AACA,MAAIL,QAAQ,EAAZ,EAAgB;AACd;AACA,QAAIE,EAAE,CAACI,IAAH,KAAY,QAAhB,EAA0B;AACtBF,MAAAA,IAAI,CAAC;AAAEE,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACH,KAFD,CAGA;AAHA,SAIK,IAAIP,YAAY,CAACD,KAAK,CAACS,OAAN,CAAcC,QAAf,CAAhB,EAA0C;AAC7CC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAZ,QAAAA,KAAK,CAACa,QAAN,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,YAAM;AACvCR,UAAAA,IAAI,CAACF,EAAD,CAAJ;AACD,SAFD,EAEE,UAACW,KAAD,EAAS;AAACJ,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBG,KAAnB;AAA0B,SAFtC;AAGD,OALI,MAMA;AACDT,QAAAA,IAAI;AACP;AAEF,GAhBD,MAgBO;AACL,QAAIC,IAAI,CAACS,MAAL,KAAgB,KAApB,EAA2B;AACzBV,MAAAA,IAAI;AACL,KAFD,MAEO;AACLA,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACD;AACF;AACF,CAzBD;AA2BAP,MAAM,CAACkB,SAAP,CAAiB,YAAM;AACrB,MAAIC,KAAK,GAAGlB,KAAK,CAACS,OAAN,CAAcU,GAAd,CAAkBC,KAA9B;AACAC,EAAAA,QAAQ,CAACH,KAAT,GAAiBA,KAAjB;AACD,CAHD","sourcesContent":["/**\r\n * 全站路由配置\r\n *\r\n * meta参数说明\r\n * keepAlive是否缓冲页面\r\n * isTab是否加入到tag导航\r\n * isAuth是否需要授权\r\n */\r\nimport router from './router'\r\nimport store from './store'\r\nimport {validatenull} from '@/util/validate'\r\nimport {getToken} from '@/util/auth'\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const meta = to.meta || {};\r\n  if (getToken()) {\r\n    //如果登录成功访问登录页跳转到主页\r\n    if (to.path === '/login') { \r\n        next({ path: '/' })\r\n    } \r\n    // 判断当前用户是否已拉取完信息,如果没有更新信息则拉取，首次加载可能会慢些\r\n    else if (validatenull(store.getters.userInfo)) { \r\n      console.log(\"拉取信息\")\r\n      store.dispatch(\"GetUserInfo\").then(() => {\r\n        next(to)\r\n      },(error)=>{console.log(\"拉取信息\",error)})\r\n    } \r\n    else {\r\n        next()\r\n    }\r\n\r\n  } else {\r\n    if (meta.isAuth === false) {\r\n      next()\r\n    } else {\r\n      next('/login')\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  let title = store.getters.tag.label;\r\n  document.title = title\r\n});\r\n"]}]}