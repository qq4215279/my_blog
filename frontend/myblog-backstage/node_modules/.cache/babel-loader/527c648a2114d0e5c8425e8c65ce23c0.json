{"remainingRequest":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\babel-loader\\lib\\index.js!D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\src\\store\\modules\\user.js","mtime":1616327517491},{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\data\\GoWorkSpace\\src\\github.com.qq4215279\\MyBlog\\frontend\\myblog-backstage\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luQnlVc2VybmFtZSwgbG9nb3V0LCBnZXRVc2VySW5mbyB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4sIGdldFRva2VuIH0gZnJvbSAnQC91dGlsL2F1dGgnOwppbXBvcnQgeyBzZXRTdG9yZSwgZ2V0U3RvcmUgfSBmcm9tICdAL3V0aWwvc3RvcmUnOwppbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL3JvdXRlcic7CgpmdW5jdGlvbiBhZGRQYXRoKGFtZW51KSB7CiAgLy/lpITnkIboj5zljZXmlbDnu4QKICByZXR1cm4gYW1lbnU7Cn0KCnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICB0b2tlbjogZ2V0VG9rZW4oKSwKICAgIHVzZXJJbmZvOiBnZXRTdG9yZSh7CiAgICAgIG5hbWU6ICd1c2VySW5mbycKICAgIH0pLAogICAgbWVudTogZ2V0U3RvcmUoewogICAgICBuYW1lOiAnbWVudScKICAgIH0pLAogICAgdG9wTWVudTogZ2V0U3RvcmUoewogICAgICBuYW1lOiAndG9wTWVudScKICAgIH0pCiAgfSwKICBhY3Rpb25zOiB7CiAgICAvL+agueaNrueUqOaIt+WQjeeZu+W9lQogICAgTG9naW5CeVVzZXJuYW1lOiBmdW5jdGlvbiBMb2dpbkJ5VXNlcm5hbWUoX3JlZiwgdXNlckluZm8pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGxvZ2luQnlVc2VybmFtZSh1c2VySW5mby51c2VybmFtZSwgdXNlckluZm8ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLmFjY2Vzc1Rva2VuKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfSU5GTycsIGRhdGEudXNlckluZm8pOyAvLy0tLS3moLnmja7pnIDmsYLmmK/lkKbpnIDopoEtLS0tLS0tCgogICAgICAgICAgY29tbWl0KCdTRVRfTUVOVScsIGRhdGEudXNlckluZm8ubWVudSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9UT1BfTUVOVScsIGRhdGEudXNlckluZm8udG9wTWVudSk7IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgIC8vIGNvbW1pdCgnREVMX0FMTF9UQUcnKTsKCiAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnmbvlh7oKICAgIExvZ091dDogZnVuY3Rpb24gTG9nT3V0KF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9nb3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX01FTlUnLCBbXSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9UT1BfTUVOVScsIFtdKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfSU5GTycsIHt9KTsgLy8gY29tbWl0KCdERUxfQUxMX1RBRycpOwoKICAgICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrnRva2Vu5YC85pu05paw55So5oi35L+h5oGvCiAgICBHZXRVc2VySW5mbzogZnVuY3Rpb24gR2V0VXNlckluZm8oX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBnZXRVc2VySW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgY29uc29sZS5sb2coIueUqOaIt+S/oeaBryIsIHJlcyk7CiAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSX0lORk8nLCBkYXRhKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX01FTlUnLCBkYXRhLm1lbnUpOwogICAgICAgICAgY29tbWl0KCdTRVRfVE9QX01FTlUnLCBkYXRhLnRvcE1lbnUpOwogICAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIC8v6K6+572udG9rZW7lgLwKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgU0VUX1VTRVJfSU5GTzogZnVuY3Rpb24gU0VUX1VTRVJfSU5GTyhzdGF0ZSwgdXNlckluZm8pIHsKICAgICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICAgICAgc2V0U3RvcmUoewogICAgICAgIG5hbWU6ICd1c2VySW5mbycsCiAgICAgICAgY29udGVudDogc3RhdGUudXNlckluZm8sCiAgICAgICAgdHlwZTogJ3Nlc3Npb24nCiAgICAgIH0pOwogICAgfSwKICAgIFNFVF9NRU5VOiBmdW5jdGlvbiBTRVRfTUVOVShzdGF0ZSwgbWVudSkgewogICAgICBzdGF0ZS5tZW51ID0gYWRkUGF0aChtZW51KTsKICAgICAgY29uc29sZS5sb2coIuazqOWGjOiPnOWNlSIpOwogICAgICBzZXRTdG9yZSh7CiAgICAgICAgbmFtZTogJ21lbnUnLAogICAgICAgIGNvbnRlbnQ6IHN0YXRlLm1lbnUsCiAgICAgICAgdHlwZTogJ3Nlc3Npb24nCiAgICAgIH0pOwogICAgICByb3V0ZXIuJE15Um91dGVyLmZvcm1hdFJvdXRlcyhzdGF0ZS5tZW51LCB0cnVlKTsKICAgIH0sCiAgICBTRVRfVE9QX01FTlU6IGZ1bmN0aW9uIFNFVF9UT1BfTUVOVShzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS50b3BNZW51ID0gZGF0YTsKICAgICAgc2V0U3RvcmUoewogICAgICAgIG5hbWU6ICd0b3BNZW51JywKICAgICAgICBjb250ZW50OiBzdGF0ZS50b3BNZW51LAogICAgICAgIHR5cGU6ICdzZXNzaW9uJwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHVzZXI7"},{"version":3,"sources":["D:/data/GoWorkSpace/src/github.com.qq4215279/MyBlog/frontend/myblog-backstage/src/store/modules/user.js"],"names":["loginByUsername","logout","getUserInfo","setToken","removeToken","getToken","setStore","getStore","router","addPath","amenu","user","state","token","userInfo","name","menu","topMenu","actions","LoginByUsername","commit","Promise","resolve","reject","username","password","then","res","data","accessToken","catch","error","LogOut","GetUserInfo","console","log","err","mutations","SET_TOKEN","SET_USER_INFO","content","type","SET_MENU","$MyRouter","formatRoutes","SET_TOP_MENU"],"mappings":"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","sourcesContent":["import { loginByUsername, logout, getUserInfo } from '@/api/user'\r\nimport {setToken, removeToken, getToken} from '@/util/auth'\r\nimport {setStore, getStore} from '@/util/store'\r\nimport router from '../../router'\r\n\r\nfunction addPath(amenu){\r\n    //处理菜单数组\r\n    return amenu\r\n}\r\nconst user = {\r\n    state:{\r\n        token:getToken(),\r\n        userInfo:getStore({name: 'userInfo'}),\r\n        menu:getStore({name: 'menu'}),\r\n        topMenu:getStore({name: 'topMenu'})\r\n    },\r\n    actions:{\r\n        //根据用户名登录\r\n        LoginByUsername({commit}, userInfo) {\r\n            return new Promise((resolve, reject) => {\r\n                loginByUsername(userInfo.username, userInfo.password).then(res => {\r\n                    const data = res.data.data;\r\n                    commit('SET_TOKEN', data.accessToken);\r\n                    commit('SET_USER_INFO', data.userInfo);\r\n                    //----根据需求是否需要-------\r\n                    commit('SET_MENU', data.userInfo.menu);\r\n                    commit('SET_TOP_MENU', data.userInfo.topMenu);\r\n                    //--------------------------\r\n                    // commit('DEL_ALL_TAG');\r\n                    resolve(res);\r\n                }).catch(error => {\r\n                    reject(error);\r\n                })\r\n            })\r\n        },\r\n        // 登出\r\n        LogOut({commit}) {\r\n            return new Promise((resolve, reject) => {\r\n                logout().then(() => {\r\n                    commit('SET_TOKEN', '');\r\n                    commit('SET_MENU', []);\r\n                    commit('SET_TOP_MENU', []);\r\n                    commit('SET_USER_INFO',{})\r\n                    // commit('DEL_ALL_TAG');\r\n                    removeToken()\r\n                    resolve()\r\n                }).catch(error => {\r\n                    reject(error)\r\n                })\r\n            })\r\n        },\r\n        //根据token值更新用户信息\r\n        GetUserInfo({ commit }) {\r\n            return new Promise((resolve, reject) => {\r\n                getUserInfo().then((res) => {\r\n                    const data = res.data.data;\r\n                    console.log(\"用户信息\",res)\r\n                    commit('SET_USER_INFO', data);\r\n                    commit('SET_MENU', data.menu);\r\n                    commit('SET_TOP_MENU', data.topMenu);\r\n                    \r\n                    resolve(data);\r\n                }).catch(err => {\r\n                    reject(err);\r\n                })\r\n            })\r\n        },\r\n    },\r\n    mutations:{\r\n        //设置token值\r\n        SET_TOKEN: (state, token) => {\r\n            setToken(token)\r\n            state.token = token;\r\n        },\r\n        SET_USER_INFO: (state, userInfo) => {\r\n            state.userInfo = userInfo;\r\n            setStore({name: 'userInfo', content: state.userInfo, type: 'session'})\r\n        },\r\n        SET_MENU: (state, menu) => {\r\n            state.menu = addPath(menu)\r\n            console.log(\"注册菜单\")\r\n            setStore({name: 'menu', content: state.menu, type: 'session'})\r\n            router.$MyRouter.formatRoutes(state.menu,true)\r\n        },\r\n        SET_TOP_MENU: (state, data) => {\r\n            state.topMenu = data\r\n            setStore({name: 'topMenu', content: state.topMenu, type: 'session'})\r\n        },\r\n    }\r\n}\r\n\r\nexport default user"]}]}